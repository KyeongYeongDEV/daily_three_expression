FROM node:18

ENV NODE_OPTIONS="--experimental-global-webcrypto"

WORKDIR /app

COPY package*.json ./
RUN npm install --production

# ğŸ”½ ì „ì²´ ì†ŒìŠ¤ ë³µì‚¬
COPY . .

# ğŸ”½ Nest ë¹Œë“œ ì‹¤í–‰ (nest-cli.json ê¸°ì¤€ìœ¼ë¡œ asset ë³µì‚¬ í¬í•¨)
RUN npm run build

# ğŸ”½ í™˜ê²½ë³€ìˆ˜ ë³µì‚¬
COPY .env .env

CMD ["node", "dist/main"]
